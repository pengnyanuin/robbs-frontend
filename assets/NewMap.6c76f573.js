import{_ as b,a as C,A as u,o as r,c as a,d as t,f as k,v as y,F as h,h as f,e as d,n as w,t as x}from"./index.b5f88274.js";const S={name:"games",data(){return{map:{title:"",rows:5,cols:5},tools:{empty:1,wall:2,player:501,objective:502,box:1001},selectedTool:"empty",fields:{1:{1:1,2:1,3:1,4:1,5:1},2:{1:1,2:1,3:1,4:1,5:1},3:{1:1,2:1,3:1,4:1,5:1},4:{1:1,2:1,3:1,4:1,5:1},5:{1:1,2:1,3:1,4:1,5:1}}}},methods:{addRow(){console.log("add row"),this.map.rows++;const s={};for(let e=1;e<=this.map.cols;e++)s[e.toString()]=1;this.fields[this.map.rows.toString()]=s},removeRow(){delete this.fields[this.map.rows.toString()],this.map.rows--},addColumn(){console.log("add col"),this.map.cols++;let s=JSON.parse(JSON.stringify(this.fields));Object.entries(s).forEach(([e,m])=>{s[e][this.map.cols.toString()]=1}),this.fields=s},removeColumn(){let s=JSON.parse(JSON.stringify(this.fields));Object.entries(s).forEach(([e,m])=>{delete s[e][this.map.cols.toString()]}),this.fields=s,this.map.cols--},applyField(s,e){this.selectedTool==="objective"&&(console.log("a"),Object.entries(this.fields).forEach(([m,v])=>{Object.entries(v).forEach(([i,l])=>{l===502&&(this.fields[m][i]=1)})})),this.fields[s][e]=this.tools[this.selectedTool]},selectTool(s){this.selectedTool=s},createMap(){const s={title:this.map.title,rows:this.map.rows,cols:this.map.cols,fields:this.fields};console.log(s),C.post(u.getApiUrl()+"maps/create",s,u.getAuthHeader()).then(e=>{console.log(e.data),this.$router.push({name:"games"})}).catch(e=>{console.log(e)})}},mounted(){}},R={class:"mb-3"},T=t("h2",null,"Title: ",-1),O={class:"row"},j={class:"col-md-6 map__preview"},A=["onClick"],F={class:"col-md-6"},E={class:"d-flex gap-3 mb-3"},M={class:"d-flex gap-3 mb-5"},J={class:"d-flex gap-3 mb-3"},N=["onClick"],B={class:"mt-5"};function D(s,e,m,v,i,l){return r(),a("div",null,[t("div",R,[T,k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.map.title=o),type:"text"},null,512),[[y,i.map.title]])]),t("div",O,[t("div",j,[(r(!0),a(h,null,f(i.fields,(o,n,p)=>(r(),a("div",{key:p,class:"map__preview__row"},[(r(!0),a(h,null,f(o,(c,_,g)=>(r(),a("div",{key:g,class:w(["map__preview__field",{"wall-field":c===2,"box-field":c===1001,"player-field":c===501,"crown-field":c===502}]),style:{cursor:"pointer"},onClick:U=>l.applyField(n,_)},null,10,A))),128))]))),128))]),t("div",F,[t("div",E,[t("a",{href:"#",class:"btn",onClick:e[1]||(e[1]=d((...o)=>l.addRow&&l.addRow(...o),["prevent"]))},"Add row"),t("a",{href:"#",class:"btn",onClick:e[2]||(e[2]=d((...o)=>l.addColumn&&l.addColumn(...o),["prevent"]))},"Add column")]),t("div",M,[t("a",{href:"#",class:"btn btn--danger",onClick:e[3]||(e[3]=d((...o)=>l.removeRow&&l.removeRow(...o),["prevent"]))},"Remove row"),t("a",{href:"#",class:"btn btn--danger",onClick:e[4]||(e[4]=d((...o)=>l.removeColumn&&l.removeColumn(...o),["prevent"]))},"Remove column")]),t("div",J,[(r(!0),a(h,null,f(i.tools,(o,n,p)=>(r(),a("a",{href:"#",class:w(["btn",{selected:i.selectedTool===n}]),key:p,onClick:d(c=>l.selectTool(n),["prevent"])},x(n),11,N))),128))])])]),t("div",B,[t("a",{href:"#",onClick:e[5]||(e[5]=d(o=>l.createMap(),["prevent"])),class:"btn"},"Create")])])}const z=b(S,[["render",D]]);export{z as default};
