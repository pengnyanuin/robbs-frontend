import{_ as L,a as v,A as i,r as h,o as s,c as r,b as o,g as M,n as w,d,e as n,F as _,i as g,w as f,t as p}from"./index.75d0bc81.js";import{L as x}from"./Loader.07a570fa.js";import{_ as A}from"./refresh.d7839b6f.js";const y="/robbs-frontend/assets/dice.290417e6.svg",C={name:"games",components:{Loader:x},data(){return{reloadLoading:!1,loading:!0,error:!1,games:null}},methods:{async mountedMethod(c){v.get(i.getApiUrl()+"games",i.getAuthHeader()).then(a=>{console.log(a.data),this.games=a.data.games}).catch(async a=>{console.log(a),this.error=!0,a.response.status===401&&!c&&await i.refreshUser()&&await this.mountedMethod(!0)}).finally(()=>{this.loading=!1,this.reloadLoading=!1})},refreshGames(){this.error=!1,this.reloadLoading=!0,this.mountedMethod()}},mounted(){this.mountedMethod()},created(){i.isLoggedIn()||console.log("asdasdasdasda")}},B={class:"main-header"},G=o("h1",{class:"main-title"},"Active",-1),D=o("img",{src:A,alt:"refresh"},null,-1),E=[D],F={class:"main-inner"},N={key:1,class:"notice"},R={key:2},S={key:0},T=o("h2",null,"My turn",-1),U={class:"game__button__title"},V={key:0,class:"game__button__my-turn",src:y,alt:"Dice"},z=o("h2",null,"Waiting",-1),H={class:"game__button__title"},I={key:0,class:"game__button__my-turn",src:y,alt:"Dice"};function W(c,a,k,j,e,m){const b=h("Loader"),u=h("router-link");return s(),r(_,null,[o("div",B,[G,o("a",{href:"#",onClick:a[0]||(a[0]=M((...t)=>m.refreshGames&&m.refreshGames(...t),["prevent"])),class:w(["btn-reload",{disabled:e.loading,loading:e.reloadLoading}])},E,2)]),o("div",F,[e.loading||e.reloadLoading?(s(),d(b,{key:0})):n("",!0),e.error?(s(),r("div",N," Error :c")):n("",!0),!e.loading&&!e.error?(s(),r("div",R,[e.games.myGames||e.games.myTurnGames?(s(),r("div",S,[T,(s(!0),r(_,null,g(e.games.myTurnGames,(t,l)=>(s(),d(u,{to:{name:"game",params:{id:t.id}},key:l,class:"game__button"},{default:f(()=>[o("span",U,p(t.title),1),t.myTurn?(s(),r("img",V)):n("",!0)]),_:2},1032,["to"]))),128)),z,(s(!0),r(_,null,g(e.games.myGames,(t,l)=>(s(),d(u,{to:{name:"game",params:{id:t.id}},key:l,class:"game__button"},{default:f(()=>[o("span",H,p(t.title),1),t.myTurn?(s(),r("img",I)):n("",!0)]),_:2},1032,["to"]))),128))])):n("",!0)])):n("",!0)])],64)}const O=L(C,[["render",W]]);export{O as default};
