import{_ as k,a as b,A as i,r as h,o as t,c as r,b as o,g as c,n as v,f as L,w as _,d as g,e as d,F as u,i as w,t as f}from"./index.75d0bc81.js";import{L as x}from"./Loader.07a570fa.js";import{_ as G}from"./refresh.d7839b6f.js";const C={name:"games_join",components:{Loader:x},data(){return{reloadLoading:!1,loading:!0,loadingMore:!1,error:!1,games:[],page:1,maxGames:0}},methods:{async mountedMethod(l){return await b.get(i.getApiUrl()+"games/joined/"+this.page,i.getAuthHeader()).then(s=>{console.log(s.data),s.data.games&&this.games.push(...s.data.games),this.maxGames=s.data.numberOfPosts}).catch(async s=>{console.log(s),this.error=!0,s.response.status===401&&!l&&await i.refreshUser()&&await this.mountedMethod(!0)}).finally(()=>{this.loading=!1,this.reloadLoading=!1,this.loadingMore=!1}),!0},loadMore(){this.page++,this.loadingMore=!0,this.mountedMethod()},refreshGames(){this.page=1,this.games=[],this.error=!1,this.reloadLoading=!0,this.mountedMethod()}},mounted(){this.mountedMethod()},created(){i.isLoggedIn()||this.$router.push({name:"login"})}},N=o("div",{class:"secondary-menu"},null,-1),A={class:"main-header"},B=o("h1",{class:"main-title"},"Open",-1),V=o("img",{src:G,alt:"refresh"},null,-1),j=[V],E=o("span",null,"New game",-1),F={class:"main-inner"},O={key:1,class:"notice"},R={key:2},S={key:0},U={class:"game__button__title"},z={class:"game__button__created-by"},D={key:1};function H(l,s,p,I,e,n){const m=h("router-link"),y=h("Loader");return t(),r(u,null,[N,o("div",A,[B,o("a",{href:"#",onClick:s[0]||(s[0]=c((...a)=>n.refreshGames&&n.refreshGames(...a),["prevent"])),class:v(["btn-reload",{disabled:e.loading,loading:e.reloadLoading}])},j,2),L(m,{to:{name:"new_game"},class:"btn btn--danger"},{default:_(()=>[E]),_:1})]),o("div",F,[e.loading||e.reloadLoading||e.loadingMore?(t(),g(y,{key:0})):d("",!0),e.error?(t(),r("div",O," Error :c")):d("",!0),!e.loading&&!e.error?(t(),r("div",R,[e.games&&e.games.length?(t(),r("div",S,[(t(!0),r(u,null,w(e.games,(a,M)=>(t(),g(m,{to:{name:"game",params:{id:a.id}},key:M,class:"game__button"},{default:_(()=>[o("span",U,f(a.title),1),o("span",z,"Made by: "+f(a.created_by.name),1)]),_:2},1032,["to"]))),128)),e.maxGames>e.games.length?(t(),r("a",{key:0,href:"#",onClick:s[1]||(s[1]=c((...a)=>n.loadMore&&n.loadMore(...a),["prevent"])),class:"btn mt-5"},"More")):d("",!0)])):(t(),r("div",D," Nothing ._. "))])):d("",!0)])],64)}const K=k(C,[["render",H]]);export{K as default};
