import{_ as w,a as h,r as D,o as s,c,d as o,n as m,e as k,f as y,v as S,F as u,j as _,g as f,t as l,b as N,w as b}from"./index.2b24578b.js";const C={name:"decks",data(){return{decks:null,decksLoading:!0,decksError:!1,newDeckName:"",deckSize:10,createNewDeckActive:!1,actions:null,actionsLoading:!0,actionsError:!1,actionsSelected:[]}},methods:{createNewDeck(){this.createNewDeckActive=!this.createNewDeckActive,this.actions||this.loadActions()},createNewDeckSend(){if(this.actionsSelected.length<this.deckSize){alert("need at least "+this.deckSize);return}if(!this.newDeckName){alert("need a name!");return}let e=[];this.actionsSelected.forEach(t=>{e.push(this.actions[t].id)}),h.post("http://127.0.0.1:8000/decks/create",{name:this.newDeckName,actions:e}).then(t=>{console.log(t.data),this.decks.push(t.data)}).catch(function(t){console.log(t)}).finally(()=>{console.log("deck created hopefully")})},loadActions(){h.get("http://127.0.0.1:8000/actions").then(e=>{console.log(e.data),this.actions=e.data}).catch(function(e){console.log(e),this.actionsError=!0}).finally(()=>{this.actionsLoading=!1})},selectAction(e){if(this.actionsSelected.includes(e)){this.actionsSelected=this.actionsSelected.filter(t=>t!==e),console.log(this.actionsSelected);return}if(this.actionsSelected.length>=this.deckSize){console.log("max reached");return}this.actionsSelected.push(e),console.log(this.actionsSelected)},deleteDeck(e){confirm("Are you sure?")?(console.log("delete"),h.get("http://127.0.0.1:8000/deck/delete/"+e.id).then(t=>{console.log(t),console.log("remove"+e),this.decks=this.decks.filter(v=>v!==e)}).catch(function(t){console.log(t)})):console.log("back")}},mounted(){h.get("http://127.0.0.1:8000/decks").then(e=>{console.log(e.data),this.decks=e.data}).catch(function(e){console.log(e),this.decksError=!0}).finally(()=>{this.decksLoading=!1})}},A={key:0,class:"mt-5"},x={class:"mb-3"},E={key:0,class:"loader"},L={key:1},z={class:"action__wrap mb-3"},V=["onClick"],B={key:0},T={key:1},j=o("hr",{class:"m-5 mb-5"},null,-1),F={key:1,class:"loader"},M={key:2},I=o("h2",null,"Decks",-1),U={key:0,class:"deck__wrap"},q={class:"deck__name"},G={class:"deck__button d-flex justify-content-between"},H=o("span",null,"Edit",-1),J=["onClick"],K={key:1},O=o("p",null,"Nothing",-1),P=[O];function Q(e,t,v,R,i,r){const g=D("router-link");return s(),c("div",null,[o("div",null,[o("a",{class:m(["btn",{"btn--danger":!i.createNewDeckActive}]),href:"#",onClick:t[0]||(t[0]=k(n=>r.createNewDeck(),["prevent"]))},"Create new",2)]),i.createNewDeckActive?(s(),c("div",A,[o("div",x,[y(o("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>i.newDeckName=n),type:"text",placeholder:"Name the deck..."},null,512),[[S,i.newDeckName]])]),i.actionsLoading?(s(),c("div",E)):(s(),c("div",L,[o("div",z,[(s(!0),c(u,null,_(i.actions,(n,d)=>(s(),c("a",{href:"#",class:m(["action",{selected:i.actionsSelected.includes(d)}]),onClick:k(a=>r.selectAction(d),["prevent"]),key:d},[o("div",null,"Speed: "+l(n.speed),1),n.distance!==0?(s(),c("div",B,"Distance: "+l(n.distance),1)):f("",!0),n.turn!==0?(s(),c("div",T,"Turn: "+l(n.turn),1)):f("",!0)],10,V))),128))]),o("a",{class:"btn",href:"#",onClick:t[2]||(t[2]=k(n=>r.createNewDeckSend(),["prevent"]))},"Create!")]))])):f("",!0),j,i.decksLoading?(s(),c("div",F)):(s(),c("div",M,[I,i.decks.length?(s(),c("div",U,[(s(!0),c(u,null,_(i.decks,(n,d)=>(s(),c("div",{class:"deck",key:d},[o("div",q,l(n.name),1),(s(!0),c(u,null,_(n.actions,(a,p)=>(s(),c("div",{class:"deck__action",key:p},l(a.id)+" / speed: "+l(a.speed)+" - distance: "+l(a.distance)+" - turn: "+l(a.turn),1))),128)),o("div",G,[N(g,{to:{name:"edit_deck",params:{id:n.id}},class:"btn"},{default:b(()=>[H]),_:2},1032,["to"]),o("a",{href:"#",class:"btn btn--danger",onClick:k(a=>r.deleteDeck(n),["prevent"])},"Delete",8,J)])]))),128))])):(s(),c("div",K,P))]))])}const X=w(C,[["render",Q]]);export{X as default};
