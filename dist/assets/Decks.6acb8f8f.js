import{_ as N,a as _,A as a,r as m,o as c,c as o,b as s,n as p,g as k,d as y,e as u,h as S,v as b,F as f,i as g,t as l,f as L,w as C}from"./index.75d0bc81.js";import{L as x}from"./Loader.07a570fa.js";const E={name:"decks",components:{Loader:x},data(){return{decks:null,decksLoading:!0,decksError:!1,newDeckName:"",deckSize:10,createNewDeckActive:!1,actions:null,actionsLoading:!0,actionsError:!1,actionsSelected:[]}},methods:{createNewDeck(){this.createNewDeckActive=!this.createNewDeckActive,this.actions||this.loadActions()},createNewDeckBack(){this.createNewDeckActive=!1},createNewDeckSend(){if(this.actionsSelected.length<this.deckSize){alert("need at least "+this.deckSize);return}if(!this.newDeckName){alert("need a name!");return}let e=[];this.actionsSelected.forEach(t=>{e.push(this.actions[t].id)}),_.post(a.getApiUrl()+"decks/create",{name:this.newDeckName,actions:e},a.getAuthHeader()).then(t=>{console.log(t.data),this.decks.push(t.data)}).catch(function(t){console.log(t)}).finally(()=>{console.log("deck created hopefully")})},loadActions(){_.get(a.getApiUrl()+"actions",a.getAuthHeader()).then(e=>{console.log(e.data),this.actions=e.data}).catch(function(e){console.log(e),this.actionsError=!0}).finally(()=>{this.actionsLoading=!1})},selectAction(e){if(this.actionsSelected.includes(e)){this.actionsSelected=this.actionsSelected.filter(t=>t!==e),console.log(this.actionsSelected);return}if(this.actionsSelected.length>=this.deckSize){console.log("max reached");return}this.actionsSelected.push(e),console.log(this.actionsSelected)},deleteDeck(e){confirm("Are you sure?")?(console.log("delete"),_.get(a.getApiUrl()+"decks/delete/"+e.id,a.getAuthHeader()).then(t=>{console.log(t),console.log("remove"+e),this.decks=this.decks.filter(v=>v!==e)}).catch(function(t){console.log(t)})):console.log("back")}},mounted(){_.get(a.getApiUrl()+"decks",a.getAuthHeader()).then(e=>{console.log(e.data),this.decks=e.data}).catch(function(e){console.log(e),this.decksError=!0}).finally(()=>{this.decksLoading=!1})}},B={class:"main-header"},z=s("h1",{class:"main-title"},"Main",-1),U={class:"main-inner"},H={key:1,class:"mt-5"},V={class:"mb-3"},M={key:0,class:"loader"},T={key:1},j={class:"action__wrap mb-3"},F=["onClick"],G={key:0},I={key:1},q={class:"d-flex justify-content-between"},J={key:2},K=s("h2",null,"Decks",-1),O={key:0,class:"deck__wrap"},P={class:"deck__name"},Q={class:"deck__button d-flex justify-content-between"},R=s("span",null,"Edit",-1),W=["onClick"],X={key:1},Y=s("p",null,"Nothing",-1),Z=[Y];function $(e,t,v,ee,i,r){const w=m("Loader"),D=m("router-link");return c(),o(f,null,[s("div",B,[z,s("a",{class:p(["btn",{"btn--danger":!i.createNewDeckActive}]),href:"#",onClick:t[0]||(t[0]=k(n=>r.createNewDeck(),["prevent"]))},"+ Add",2)]),s("div",U,[i.decksLoading||i.createNewDeckActive&&i.actionsLoading?(c(),y(w,{key:0})):u("",!0),i.createNewDeckActive?(c(),o("div",H,[s("div",V,[S(s("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>i.newDeckName=n),type:"text",placeholder:"Name the deck..."},null,512),[[b,i.newDeckName]])]),i.actionsLoading?(c(),o("div",M)):(c(),o("div",T,[s("div",j,[(c(!0),o(f,null,g(i.actions,(n,h)=>(c(),o("a",{href:"#",class:p(["action",{selected:i.actionsSelected.includes(h)}]),onClick:k(d=>r.selectAction(h),["prevent"]),key:h},[s("div",null,"Speed: "+l(n.speed),1),n.distance!==0?(c(),o("div",G,"Distance: "+l(n.distance),1)):u("",!0),n.turn!==0?(c(),o("div",I,"Turn: "+l(n.turn),1)):u("",!0)],10,F))),128))]),s("div",q,[s("a",{class:"btn",href:"#",onClick:t[2]||(t[2]=k(n=>r.createNewDeckBack(),["prevent"]))},"Go back"),s("a",{class:"btn",href:"#",onClick:t[3]||(t[3]=k(n=>r.createNewDeckSend(),["prevent"]))},"Create!")])]))])):u("",!0),!i.decksLoading&&!i.createNewDeckActive?(c(),o("div",J,[K,i.decks.length?(c(),o("div",O,[(c(!0),o(f,null,g(i.decks,(n,h)=>(c(),o("div",{class:"deck",key:h},[s("div",P,l(n.name),1),(c(!0),o(f,null,g(n.actions,(d,A)=>(c(),o("div",{class:"deck__action",key:A},l(d.id)+" / speed: "+l(d.speed)+" - distance: "+l(d.distance)+" - turn: "+l(d.turn),1))),128)),s("div",Q,[L(D,{to:{name:"edit_deck",params:{id:n.id}},class:"btn"},{default:C(()=>[R]),_:2},1032,["to"]),s("a",{href:"#",class:"btn btn--danger",onClick:k(d=>r.deleteDeck(n),["prevent"])},"Delete",8,W)])]))),128))])):(c(),o("div",X,Z))])):u("",!0)])],64)}const ce=N(E,[["render",$]]);export{ce as default};
